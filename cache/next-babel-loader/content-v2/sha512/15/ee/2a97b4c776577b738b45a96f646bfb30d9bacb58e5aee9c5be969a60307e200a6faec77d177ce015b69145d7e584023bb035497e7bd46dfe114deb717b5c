{"ast":null,"code":"import _regeneratorRuntime from \"D:/adit/bnbdonasi/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/adit/bnbdonasi/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Head from \"next/head\";\nimport { useEffect, useState } from \"react\";\nimport NextLink from \"next/link\";\nimport styles from \"../styles/Home.module.css\";\nimport { getETHPrice, getWEIPriceInUSD } from \"../lib/getETHPrice\";\nimport { Heading, useBreakpointValue, useColorModeValue, Text, Button, Flex, Container, SimpleGrid, Box, Divider, Skeleton, Img, Icon, chakra, Tooltip, Link, SkeletonCircle, HStack, Stack, Progress } from \"@chakra-ui/react\";\nimport web3 from \"../smart-contract/web3\";\nimport Campaign from \"../smart-contract/campaign\";\nimport { ExternalLinkIcon } from \"@chakra-ui/icons\";\nimport { FaHandshake } from \"react-icons/fa\";\nimport { FcShare, FcDonate, FcMoneyTransfer } from \"react-icons/fc\";\n\nvar Feature = function Feature(_ref) {\n  var title = _ref.title,\n      text = _ref.text,\n      icon = _ref.icon;\n  return /*#__PURE__*/_jsxs(Stack, {\n    children: [/*#__PURE__*/_jsx(Flex, {\n      w: 16,\n      h: 16,\n      align: \"center\",\n      justify: \"center\",\n      color: \"white\",\n      rounded: \"full\",\n      bg: useColorModeValue(\"gray.100\", \"gray.700\"),\n      mb: 1,\n      children: icon\n    }), /*#__PURE__*/_jsx(Text, {\n      fontWeight: 600,\n      children: title\n    }), /*#__PURE__*/_jsx(Text, {\n      color: useColorModeValue(\"gray.500\", \"gray.200\"),\n      children: text\n    })]\n  });\n};\n\nfunction CampaignCard(_ref2) {\n  var name = _ref2.name,\n      description = _ref2.description,\n      creatorId = _ref2.creatorId,\n      imageURL = _ref2.imageURL,\n      id = _ref2.id,\n      balance = _ref2.balance,\n      target = _ref2.target,\n      ethPrice = _ref2.ethPrice;\n  return /*#__PURE__*/_jsx(NextLink, {\n    href: \"/campaign/\".concat(id),\n    children: /*#__PURE__*/_jsxs(Box, {\n      bg: useColorModeValue(\"white\", \"gray.800\"),\n      maxW: {\n        md: \"sm\"\n      },\n      borderWidth: \"1px\",\n      rounded: \"lg\",\n      shadow: \"lg\",\n      position: \"relative\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      cursor: \"pointer\",\n      transition: \"transform 0.3s ease\",\n      _hover: {\n        transform: \"translateY(-8px)\"\n      },\n      children: [/*#__PURE__*/_jsx(Box, {\n        height: \"18em\",\n        children: /*#__PURE__*/_jsx(Img, {\n          src: imageURL,\n          alt: \"Picture of \".concat(name),\n          roundedTop: \"lg\",\n          objectFit: \"cover\",\n          w: \"full\",\n          h: \"full\",\n          display: \"block\"\n        })\n      }), /*#__PURE__*/_jsxs(Box, {\n        p: \"6\",\n        children: [/*#__PURE__*/_jsxs(Flex, {\n          mt: \"1\",\n          justifyContent: \"space-between\",\n          alignContent: \"center\",\n          py: 2,\n          children: [/*#__PURE__*/_jsx(Box, {\n            fontSize: \"2xl\",\n            fontWeight: \"semibold\",\n            as: \"h4\",\n            lineHeight: \"tight\",\n            isTruncated: true,\n            children: name\n          }), /*#__PURE__*/_jsx(Tooltip, {\n            label: \"Contribute\",\n            bg: useColorModeValue(\"white\", \"gray.700\"),\n            placement: \"top\",\n            color: useColorModeValue(\"gray.800\", \"white\"),\n            fontSize: \"1.2em\",\n            children: /*#__PURE__*/_jsxs(chakra.a, {\n              display: \"flex\",\n              children: [/*#__PURE__*/_jsx(Icon, {\n                as: FaHandshake,\n                h: 7,\n                w: 7,\n                alignSelf: \"center\",\n                color: \"teal.400\"\n              }), \" \"]\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(Flex, {\n          alignContent: \"center\",\n          py: 2,\n          children: [\" \", /*#__PURE__*/_jsx(Text, {\n            color: \"gray.500\",\n            pr: 2,\n            children: \"by\"\n          }), \" \", /*#__PURE__*/_jsx(Heading, {\n            size: \"base\",\n            isTruncated: true,\n            children: creatorId\n          })]\n        }), /*#__PURE__*/_jsxs(Flex, {\n          direction: \"row\",\n          py: 2,\n          children: [/*#__PURE__*/_jsxs(Box, {\n            w: \"full\",\n            children: [/*#__PURE__*/_jsxs(Box, {\n              fontSize: \"2xl\",\n              isTruncated: true,\n              maxW: {\n                base: \"\t15rem\",\n                sm: \"sm\"\n              },\n              pt: \"2\",\n              children: [/*#__PURE__*/_jsx(Text, {\n                as: \"span\",\n                fontWeight: \"bold\",\n                children: balance > 0 ? web3.utils.fromWei(balance, \"ether\") : \"0, Become a Donor ðŸ˜„\"\n              }), /*#__PURE__*/_jsxs(Text, {\n                as: \"span\",\n                display: balance > 0 ? \"inline\" : \"none\",\n                pr: 2,\n                fontWeight: \"bold\",\n                children: [\" \", \"ETH\"]\n              }), /*#__PURE__*/_jsxs(Text, {\n                as: \"span\",\n                fontSize: \"lg\",\n                display: balance > 0 ? \"inline\" : \"none\",\n                fontWeight: \"normal\",\n                color: useColorModeValue(\"gray.500\", \"gray.200\"),\n                children: [\"($\", getWEIPriceInUSD(ethPrice, balance), \")\"]\n              })]\n            }), /*#__PURE__*/_jsxs(Text, {\n              fontSize: \"md\",\n              fontWeight: \"normal\",\n              children: [\"target of \", web3.utils.fromWei(target, \"ether\"), \" ETH ($\", getWEIPriceInUSD(ethPrice, target), \")\"]\n            }), /*#__PURE__*/_jsx(Progress, {\n              colorScheme: \"teal\",\n              size: \"sm\",\n              value: web3.utils.fromWei(balance, \"ether\"),\n              max: web3.utils.fromWei(target, \"ether\"),\n              mt: \"2\"\n            })]\n          }), \" \"]\n        })]\n      })]\n    })\n  });\n}\n\nexport var __N_SSP = true;\nexport default function Home(_ref3) {\n  var campaigns = _ref3.campaigns;\n\n  var _useState = useState([]),\n      campaignList = _useState[0],\n      setCampaignList = _useState[1];\n\n  var _useState2 = useState(null),\n      ethPrice = _useState2[0],\n      updateEthPrice = _useState2[1];\n\n  function getSummary() {\n    return _getSummary.apply(this, arguments);\n  }\n\n  function _getSummary() {\n    _getSummary = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var summary, ETHPrice;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return Promise.all(campaigns.map(function (campaign, i) {\n                return Campaign(campaigns[i]).methods.getSummary().call();\n              }));\n\n            case 3:\n              summary = _context.sent;\n              _context.next = 6;\n              return getETHPrice();\n\n            case 6:\n              ETHPrice = _context.sent;\n              updateEthPrice(ETHPrice);\n              console.log(\"summary \", summary);\n              setCampaignList(summary);\n              return _context.abrupt(\"return\", summary);\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n    return _getSummary.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    getSummary();\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"BNBDonasi\"\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        name: \"description\",\n        content: \"Transparent Crowdfunding in Blockchain\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/logo.svg\"\n      })]\n    }), /*#__PURE__*/_jsxs(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxs(Container, {\n        py: {\n          base: \"4\",\n          md: \"12\"\n        },\n        maxW: \"7xl\",\n        align: \"left\",\n        children: [\" \", /*#__PURE__*/_jsxs(Heading, {\n          textAlign: useBreakpointValue({\n            base: \"left\"\n          }),\n          fontFamily: \"heading\",\n          color: useColorModeValue(\"gray.800\", \"white\"),\n          as: \"h1\",\n          py: 4,\n          children: [\"Crowdfunding using the powers of \", /*#__PURE__*/_jsx(\"br\", {}), \" Crypto & Blockchain \\uD83D\\uDE04\", \" \"]\n        }), /*#__PURE__*/_jsx(NextLink, {\n          href: \"/campaign/new\",\n          children: /*#__PURE__*/_jsx(Button, {\n            display: {\n              sm: \"inline-flex\"\n            },\n            fontSize: \"md\",\n            fontWeight: 600,\n            color: \"white\",\n            bg: \"teal.400\",\n            _hover: {\n              bg: \"teal.300\"\n            },\n            children: \"Create Campaign\"\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(Container, {\n        py: {\n          base: \"4\",\n          md: \"12\"\n        },\n        maxW: \"7xl\",\n        children: [/*#__PURE__*/_jsxs(HStack, {\n          spacing: 2,\n          children: [/*#__PURE__*/_jsx(SkeletonCircle, {\n            size: \"4\"\n          }), /*#__PURE__*/_jsx(Heading, {\n            as: \"h2\",\n            size: \"lg\",\n            children: \"Open Campaigns\"\n          })]\n        }), /*#__PURE__*/_jsx(Divider, {\n          marginTop: \"4\"\n        }), campaignList.length > 0 ? /*#__PURE__*/_jsx(SimpleGrid, {\n          columns: {\n            base: 1,\n            md: 3\n          },\n          spacing: 10,\n          py: 8,\n          children: campaignList.map(function (el, i) {\n            return /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(CampaignCard, {\n                name: el[5],\n                description: el[6],\n                creatorId: el[4],\n                imageURL: el[7],\n                id: campaigns[i],\n                target: el[8],\n                balance: el[1],\n                ethPrice: ethPrice\n              })\n            }, i);\n          })\n        }) : /*#__PURE__*/_jsxs(SimpleGrid, {\n          columns: {\n            base: 1,\n            md: 3\n          },\n          spacing: 10,\n          py: 8,\n          children: [/*#__PURE__*/_jsx(Skeleton, {\n            height: \"25rem\"\n          }), /*#__PURE__*/_jsx(Skeleton, {\n            height: \"25rem\"\n          }), /*#__PURE__*/_jsx(Skeleton, {\n            height: \"25rem\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(Container, {\n        py: {\n          base: \"4\",\n          md: \"12\"\n        },\n        maxW: \"7xl\",\n        id: \"howitworks\",\n        children: [/*#__PURE__*/_jsxs(HStack, {\n          spacing: 2,\n          children: [/*#__PURE__*/_jsx(SkeletonCircle, {\n            size: \"4\"\n          }), /*#__PURE__*/_jsx(Heading, {\n            as: \"h2\",\n            size: \"lg\",\n            children: \"How BNBdonasi Works\"\n          })]\n        }), /*#__PURE__*/_jsx(Divider, {\n          marginTop: \"4\"\n        }), /*#__PURE__*/_jsxs(SimpleGrid, {\n          columns: {\n            base: 1,\n            md: 3\n          },\n          spacing: 10,\n          py: 8,\n          children: [/*#__PURE__*/_jsx(Feature, {\n            icon: /*#__PURE__*/_jsx(Icon, {\n              as: FcDonate,\n              w: 10,\n              h: 10\n            }),\n            title: \"Create a Campaign for Fundraising\",\n            text: \"Itâ€™ll take only 2 minutes. Just enter a few details about the funds you are raising for.\"\n          }), /*#__PURE__*/_jsx(Feature, {\n            icon: /*#__PURE__*/_jsx(Icon, {\n              as: FcShare,\n              w: 10,\n              h: 10\n            }),\n            title: \"Share your Campaign\",\n            text: \"All you need to do is share the Campaign with your friends, family and others. In no time, support will start pouring in.\"\n          }), /*#__PURE__*/_jsx(Feature, {\n            icon: /*#__PURE__*/_jsx(Icon, {\n              as: FcMoneyTransfer,\n              w: 10,\n              h: 10\n            }),\n            title: \"Request and Withdraw Funds\",\n            text: \"The funds raised can be withdrawn directly to the recipient when 50% of the contributors approve of the Withdrawal Request.\"\n          })]\n        }), /*#__PURE__*/_jsx(Divider, {\n          marginTop: \"4\"\n        })]\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}